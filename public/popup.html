<!doctype html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>도로명주소 검색 팝업</title>
    <script>
      function init() {
        var url = new URL(window.location.href);
        var confmKey = 'devU01TX0FVVEgyMDI0MDcyNTAzMjMwNjExNDk1ODQ='; // 승인키
        var resultType = '4'; // 도로명주소 검색결과 화면 출력유형
        var inputYn = url.searchParams.get('inputYn');

        if (inputYn !== 'Y') {
          document.getElementById('confmKey').value = confmKey;
          document.getElementById('returnUrl').value = window.location.href;
          document.getElementById('resultType').value = resultType;
          document.getElementById('form').action =
            'https://business.juso.go.kr/addrlink/addrLinkUrl.do'; // 인터넷망
          document.getElementById('form').submit();
        } else {
          const params = [
            'roadFullAddr',
            'roadAddrPart1',
            'addrDetail',
            'roadAddrPart2',
            'engAddr',
            'jibunAddr',
            'zipNo',
            'admCd',
            'rnMgtSn',
            'bdMgtSn',
            'detBdNmList',
            'bdNm',
            'bdKdcd',
            'siNm',
            'sggNm',
            'emdNm',
            'liNm',
            'rn',
            'udrtYn',
            'buldMnnm',
            'buldSlno',
            'mtYn',
            'lnbrMnnm',
            'lnbrSlno',
            'emdNo',
          ].map((param) => url.searchParams.get(param));

          window.opener.jusoCallBack(...params);
          window.close();
        }
      }
    </script>
  </head>
  <body onload="init();">
    <form id="form" name="form" method="post">
      <input type="hidden" id="confmKey" name="confmKey" value="" />
      <input type="hidden" id="returnUrl" name="returnUrl" value="" />
      <input type="hidden" id="resultType" name="resultType" value="" />
    </form>
  </body>
</html>
